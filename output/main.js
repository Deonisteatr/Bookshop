(()=>{"use strict";(()=>{let e=[{url:"./src/img/banners/banner.jpg",title:"Black Friday Sale banner"},{url:"./src/img/banners/banner2.jpg",title:"Top 10 Books banner"},{url:"./src/img/banners/banner3.jpg",title:"Cozy Books banner"}];document.addEventListener("DOMContentLoaded",(()=>{!function(e,t){if(!e||!e.length)return;t=t||{dots:!1,titles:!1,autoplay:!1,autoplayInterval:5e3};const s=document.querySelector(".slider"),a=document.querySelector(".slider__images");function r(s){if(a.querySelector(".active").classList.remove("active"),a.querySelector(`.n${s}`).classList.add("active"),t.titles){let t=a.querySelector(".slider__images-title");e[s].title?(t.innerText=e[s].title,t.style.display="block"):t.style.display="none"}if(t.dots){let e=document.querySelector(".slider__dots");e.querySelector(".active").classList.remove("active"),e.querySelector(`.n${s}`).classList.add("active")}}e.forEach(((e,t)=>{let s=document.createElement("div");s.className=`image n${t} ${t?"":"active"}`,s.dataset.index=t,s.style.backgroundImage=`url(${e.url})`,a.appendChild(s)})),t.dots&&function(){let t=document.createElement("div");t.className="slider__dots",e.forEach(((e,s)=>{let a=document.createElement("div");a.className=`slider__dots-item n${s} ${s?"":"active"}`,a.dataset.index=s,a.addEventListener("click",(function(){r(this.dataset.index)})),t.appendChild(a)})),s.appendChild(t)}(),t.titles&&function(){let t=`<div class="slider__images-title">${e[0].title}</div>`;a.innerHTML+=t}(),t.autoplay&&setInterval((()=>{let t=+a.querySelector(".active").dataset.index;r(t===e.length-1?0:t+1)}),t.autoplayInterval)}(e,{dots:!0,titles:!1,autoplay:!0,autoplayInterval:5e3})}))})(),(()=>{let e=document.querySelector(".gallery-cards__category-item").getAttribute("data-category"),t=0;const s=async()=>{let s=await fetch(`https://www.googleapis.com/books/v1/volumes?q="${e}"&key=AIzaSyCJTLj6-BioGtky20qNn8z3aKu-HIe44H4&printType=books&startIndex=${t}&maxResults=6&langRestrict=en`).then((e=>e.json())).then((e=>e.items)).catch((e=>{console.log(e)}));t+=6,s.forEach((e=>{let t=e.volumeInfo.imageLinks?.thumbnail??"./src/img/icons/logo.svg",s=e.volumeInfo.authors?.join(", ")??"Unknown Author",a=e.volumeInfo.title,r=e.volumeInfo?.description??"No description",n=e.volumeInfo?.ratingsCount??"";n&&(n=e.volumeInfo.ratingsCount+" reviews");let l="Without price",i="";"FOR_SALE"===e.saleInfo.saleability&&(l=e.saleInfo.retailPrice?.amount,i=e.saleInfo.retailPrice?.currencyCode);let c=`<div class="gallery-cards__book" id="${e.id}">\n            <img src="${t}" alt="${e.title}" class="gallery-cards__book-img">\n            <div class="gallery-cards__info">\n                <div class="gallery-cards__first-block">\n                    <h3 class="author">${s}</h3>\n                    <h2 class="title">${a}</h2>\n                    <div class="rating">\n                        <div class="review-stars">\n                            <div class="count">${n}<span></span></div>\n                            <div class="stars">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n                <div class="gallery-cards__second-block">\n                    <p class="description">${r}</p>\n                    <span class="price">${l}${i}</span>\n                    <button class="btn" id="${e.id}"><a class="" href="#" onclick="return false;">BUY NOW</a></button>\n                </div>\n            </div>\n        </div>`;document.querySelector(".gallery-cards__books").innerHTML+=c;let o=document.getElementById(e.id).querySelectorAll(".review-star"),d=Math.floor(e.volumeInfo.averageRating);for(let e=0;e<d;e++)o[e].src="./src/img/icons/gold-star.svg"}));const a=Array.from(document.querySelectorAll(".btn")),r=document.querySelector(".numb");a.forEach((e=>{Object.prototype.hasOwnProperty.call(localStorage,e.id)&&(e.classList.add("added"),e.innerHTML="IN THE CART");let t=`<div class="items-number">${Object.keys(localStorage).length}</div>`;Object.keys(localStorage).length>0&&(r.innerHTML=t),e.addEventListener("click",(()=>{const s=e.id;e.classList.contains("added")?e.classList.contains("added")&&(e.innerHTML="BUY NOW",e.classList.remove("added"),localStorage.removeItem(s,e.id)):(e.innerHTML="IN THE CART",e.classList.add("added"),localStorage.setItem(s,e.id)),t=`<div class="items-number">${Object.keys(localStorage).length}</div>`,r.innerHTML=t,0==Object.keys(localStorage).length&&(r.innerHTML=" ")}))}))};s(),document.addEventListener("click",(a=>{a.target.classList.contains("gallery-cards__category-item")&&(t=0,a.preventDefault(),document.querySelector(".gallery-cards__category-item.active")?.classList?.remove("active"),a.target.classList.add("active"),document.querySelector(".gallery-cards__books").innerHTML="",e=a.target.innerText,s()),a.target.classList.contains("load-more")&&(t+=6,s())}))})()})();